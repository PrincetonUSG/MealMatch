<!DOCTYPE html>
<html>

<head>
	<title>MealMatch | {{title_value}}</title>
	{% include 'imports.html' %}
</head>

<body class="forceMaven">
	{% include 'header.html' %}


	{% if new_user %}
	<div class="modal fade" id="newUserModal" tabindex="-1"
				aria-labelledby="ModalLabel_newUser" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="ModalLabel_Disclaimer">
								Disclaimer</h5>
							<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
						</div>
						<div class="modal-body">
							<p>
								By using MealMatch, you are agreeing to allow some personal information 
								(e.g, name, major, class year, phone number) to be shared with other users/Princeton students. <br/>
								MealMatch is not responsible for any communication or interaction that occurs outside of the app.
							</p>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary sml_button"
							 style = "background-color: #ff9f46; color: white;"
							 data-bs-dismiss="modal">Close</button>
						</div>
					</div>
				</div>
	</div>
	<script type="text/javascript">
		$(window).on('load', function() {
			$('#newUserModal').modal('show');
		});
	</script>
	{% endif %}


	<div class="container-fluid">
		<div style="margin-top: 10px;">
			<h2>{{title_value}}</h2>
		</div>
		<hr>
		<form action="/submit_profile_form" method="get">
			<table>
				<tr>
					<td align="right">Name:</td>
					<td>
						<input class="form-control profileInput" name="name" id='name' required pattern="[A-ZÀ-ÿ][-,a-zA-Z. ']+[ ]*"
							value="{{existing_profile_info['name']}}" placeholder="First and Last Name">
					</td>
				</tr>
				<tr>
					<td align="right">Year:</td>
					<td>
						<select class="form-select profileInput" name="year" required>
							<option disabled selected hidden value="">Select your year</option>
							{%for i in range(-1, 4)%}
							{%set output = senior_class+i %}
							{% if i == -1 %}
							{%set output = "Grad Student" %}
							{% endif %}
							{% if senior_class+i==existing_profile_info['year'] %}
							<option selected>{{output}}</option>
							{% else %}
							<option>{{output}}</option>
							{% endif %}
							{%endfor%}
						</select>
					</td>
				</tr>
				<tr>
					<td align="right">Major:</td>
					<td>
						<select class="form-select profileInput" name="major" required>
							<option disabled selected hidden value="">Choose your major</option>
							{% for major in majors %}
							{% if major==existing_profile_info['major'] %}
							<option selected>{{major}}</option>
							{% else %}
							<option>{{major}}</option>
							{% endif %}
							{% endfor %}
						</select>
					</td>
				</tr>

				<tr>
					<td align="right">Bio:</td>
					<td>
						<textarea class="form-control profileInput"
							placeholder="Tell your future match some things about yourself! Any good conversation starters?"
							name="bio">{{existing_profile_info['bio']}}</textarea>
					</td>
				</tr>

				<tr>
					<td align="right">Phone Number:</td>
					<td>
						<input class="form-control profileInput" type="tel" name="phonenum"
							placeholder="10 digits, no dashes etc." pattern="[0-9]{10}" required
							value="{{existing_profile_info['phonenum']}}">
					</td>
				</tr>
				<tr>
					<td align="right">Match Preference:</td>
					<td>
						<div class = 'row'>
							<div class="btn-group btn-group-toggle col-sm-8" role="group" data-toggle = "buttons">

								<!-- Old Config -->
								<!-- <div class="btn-group" role="group" aria-label="radio toggle button group for algorithm preference"> -->

								{%for option in ['Major/Year', 'Random'] %}
								{% if option == existing_profile_info['matchpref'] %}
								<input type="radio" class="btn-check form-control profileInput mainButton" id="btn-check-{{option}}" name="match-pref" value="{{option}}" checked>
								<label class="btn btn-secondary active-button" id = "toggle-button-{{option}}" for="btn-check-{{option}}">{{option}}</label>
								{%else%}
								<input type="radio" class="btn-check form-control profileInput mainButton" id="btn-check-{{option}}" name="match-pref" value="{{option}}">
								<label class="btn btn-secondary inactive-button" id = "toggle-button-{{option}}" for="btn-check-{{option}}">{{option}}</label>
								{%endif%}
								{%endfor%}
								
							</div>
							<div class = 'col-sm-4'>
										<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"
										data-toggle="tooltip" data-bs-placement="right" title="Indicate whether you prefer to eat with random people or people of your major and class year!">
											<path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
											<path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
										</svg>  
										<script>
											// activate tooltips
											$('.bi-info-circle').ready(function () {
											$('[data-toggle="tooltip"]').tooltip()
											})
										</script>

							</div>
						</div>
					</td>
				</tr>
				<tr>
					<td>
					</td>
					<td>
						<input id='submit' class="form-control profileInput orange-moon mainButton enter-button"
							type="submit" value="{{button_value}}">
					</td>
					<div>
						{% if valid_phonenum == False %}
						<div class="container row" id="errorBox" style="color: red">Please enter a valid US phone number.</div>
						{% endif %}
					</div>
				</tr>
			</table>
		</form>
	</div>
	<hr>
</body>

<script type = "text/javascript" src = "../static/js/prefmatchbuttons.js">
</script>


</html>



<style>
	.profileInput {
		padding-left: 10px;
		padding-top: 10px;
		padding-bottom: 10px;
		margin-top: 5px;
		margin-bottom: 5px;
	}
	.mainButton:hover {
		transform: scale(1.05) perspective(1px);
	}

	

	.active-button {
		background-color: #ff9f46 !important;
	}

	.inactive-button {
		background-color: #bbb !important;
	}
	
	.special-container{
		display: table;
		height: 100%;
	}

	.vertical-center{
	display: table-cell;
	text-align: center;
	vertical-align: middle;
	}

</style>